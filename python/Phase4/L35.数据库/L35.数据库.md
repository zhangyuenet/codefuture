# L35.数据库
## 教学目标
1. 正确连接数据库；
2. 常用的增删改查；
本教程假设你已经基本了解SQL的基本语法，并有一个测试库用来学习。关于学习SQL，本教程推荐：[https://www.w3schools.com/sql/default.asp][1]。
考虑到MySQL的普及程度，我们接下来的课程将以MySQL为例。其它数据库的差异请自行搜索。

## 数据库引擎
使用Python连接数据库，需要首先安装数据库连接引擎。MySQL的引擎是mysql-connector-python:
```python
pip3 install mysql-connector-python
```
在代码中除了需要添加引用外，主要的操作对象是连接对象和游标，同时，作为连接资源，使用结束后需要关闭：
```python
import mysql.connector

conn = mysql.connector.connect(conn = mysql.connector.connect(host='localhost', user='root', port=3306, passwd='password', database='testdb', auth_plugin='mysql_native_password')
cursor = conn.cursor())
cursor = conn.cursor()
... ...

cursor.close()
conn.close()
```

connect的参数是：
- host：数据库域名或者ip；
- port：端口号；
- user：用户名；
- passed：口令；
- database：数据库名称；
- `auth_plugin` :

## 执行查询SELECT
执行各种查询都使用cursor.execute()。SELECT的典型操作如下：
```python
cursor.execute('SELECT * FROM human WHERE id=12345')
# 多条记录
result = cursor.fetchall()
# 一条记录
result = cursor.fetchone()
```

fetchone的返回结果是一个set: (item1, item2)
没有返回值时，fetchone返回 None
fetchall的返回结果是一个二维set： ((item11,item12),(item21,item22))
没有返回值时，fetchall返回空set： ()
如果确定只会返回一条记录，可以使用fetchone。
如果返回数据中包含多条记录，以下两种方式都可以:
- 使用fetchall一次获取全部数据；
- 使用fetchone一次获取一条，直至返回null；
每一条数据可以用index值获取，例如：
```python
cursor.execute('SELECT * FROM human WHERE id=12345')
# 多条记录
result = cursor.fetchall()
for item in result:
	print(item[0])
# 一条记录
result = cursor.fetchone()
print(result[0])
```

# 增删改Insert，Delete, Update
做增删改操作，




[1]:	https://www.w3schools.com/sql/default.asp