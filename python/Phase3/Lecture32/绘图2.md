# Lecture32 绘图2

## 教学目标
在上节课的基础上，本节课将提供如下内容：
- 坐标轴的设置；
- 网格；
- 图例；
- 多图像排列；

有了上面这些工具，学生将能够绘制出相当专业的数学函数图表。

## 坐标轴
上节课我们练习了绘制函数。例如下面的代码（省略了import的部分）：
```python
x = np.arange(-10, 10, 0.1)
y1 = 2 * x + 1 
y2 = x * x
plt.plot(x,y1, color='r', linestyle='-', linewidth=1)
plt.plot(x,y2, color='b', linestyle=':', linewidth=1)
plt.show()
```
大家再观察一下这幅图。因为我们定义了x的值是从-10到10,因此，横轴（X轴）显示的数据范围默认就是-10到10。 我们尝试分别只显示y1, 只显示y2，同时显示y1和y2。三种情况下，我们会发现横轴（X轴）显示的数值始终不变。但Y轴差异很大。

如果只显示y1，那么，纵轴（Y轴）的范围是从-19到21，因为当x=-10时，y=-19，x=10时，y=21。坐标轴上显示了整数-20到20。

如果只显示y2，那么，纵轴（Y轴）的范围就自动变成了0到100，因为y2 = x * x的最小值是0，最大值是当x=-10或者x=10时y=100。

当y1和y2合在一起显示的时候，纵轴（Y轴）的范围就是上面两种情况的综合，从-19到100。只有这样，两幅图像才能完整的显示出来。

但实际上，大多数情况下，将多幅图像放在一起，我们需要关注的部分往往是他们重叠（相交）的部分，至于是否能在X轴的范围内完整显示，反而不重要。这时候，我们就需要能够控制Y轴的范围。这一点很简单：
```python
plt.axis([x_min, x_max, y_min, y_max])
```
这个函数的用法一目了然，四个参数分别是横轴（X轴）的最小值最大值，纵轴（Y轴）的最小值最大值。我们试试看（axis.py）：
```python
x = np.arange(-10, 10, 0.1)
y1 = 2 * x + 1 
y2 = x * x
plt.axis([-5,5,-20,30])
plt.plot(x,y1, color='r', linestyle='-', linewidth=1)
plt.plot(x,y2, color='b', linestyle=':', linewidth=1)
plt.show()
```
大家看看效果，这样设定范围后，两条线相交的部分更清晰的显示在图的中央区域。刚才说了，这个区域往往才是我们关心的部分。

【学生提问】现在问一下大家，大家有没有注意到，plt.axis()函数需要几个参数？是四个么？
不是的，实际上plt.axis()只输入一个参数，只不过这个参数是一个包含四个元素的数组list。这一点很多人容易搞错，写成这种错误形式：
```python
#error code
plt.axis(-5,5,-20,30)
```
等会大家写作业的时候，一定要注意这一点，否则你会遇到一个错误提示。

坐标轴除了取值范围外，还有一个特征需要我们处理，我们看现在坐标轴上标注的刻度，区间很大，实际上我们不太能看清楚图像相交的位置坐标大致是多少。因此我们需要能够对坐标轴的刻度进行控制。这需要使用下面的两个函数: plt.xticks() 和 plt.yticks()
这两个函数的参数，是一个数组list，记录着所有的刻度。这里，我们要介绍一种写法：
```python
>>> alist = [i for i in range(-3,3)]
>>> print(alist)
[-3, -2, -1, 0, 1, 2]
```
如果想要密度更小的数组，还可以这样写：
```python
>>> alist = [i*0.5 for i in range(-3,3)]
>>> print(alist)
[-1.5, -1.0, -0.5, 0.0, 0.5, 1.0]
```
大家不妨尝试一下更小的刻度，例如0.1，应该怎么写呢？

我们将上面生成的数组，放入plt.xticks()或者plt.yticks()试试看：
```python
plt.xticks([x for x in range(-10,10)])
plt.yticks([x * 2 for x in range(-10,15)])
```
可以看到，刻度的值发生了变化，更容易让我们观察图像中点的位置。大家不妨调整一下xticks和yticks，看看不同的刻度密度影响是什么样的，例如：
```python
plt.xticks([x * 0.5 for x in range(-20,20)])
plt.xticks([x * 0.1 for x in range(-100,100)])
...
```

## 网格
在图像中加入横纵网格，往往更能让我们看清楚点的坐标：
```python
plt.grid(color="y", linestyle=":")
```
加上网格的效果，图像的坐标更加清晰了。网格的用法很简单，其中的参数，我们之前碰到过，和线条的参数是类似的，同学们可以查阅上节课的几个表格，换一下网格的颜色和线条类型试试看。

### 图例
我们的图像上有两条线，他们分别是那个函数的呢？
作为专业的图像，往往需要标注出来图像对应的函数，函数plt.legend()允许我们在图中做标注，但是在显示图例之前，我们要给曲线设置一个名称：
```python
plt.plot(x,y1, color='r', linestyle='-', linewidth=1, label='2x+1')
plt.plot(x,y2, color='b', linestyle=':', linewidth=1, label='x*x')
plt.legend()
```
看看效果。图例显示在了左上角，曲线的label，名称可以随意调整，大家试试看。

如果刚好有图像显示在左上角，我们希望图例放在其它地方怎么办？很容易：
```python
plt.legend(loc='lower right')
```
可以看到图例放在了右下角。而且参数好像很直观，如果我们希望放在右上角，应该怎么写？大家猜一下？

给大家说一个技巧，当你忘掉位置怎么写的时候，你可以随意写点东西，然后执行一下看看效果。比如：
```python 
#error example
plt.legend(loc='top right')
```
老师的这种写法是错误的，这时候，图例出现在了默认的左上角，但是，在命令行输出信息中，我们可以看到Python列举出了正确的写法：
- best
- upper right
- upper left
- lower left
- lower right
- right
- center left
- center right
- lower center
- upper center
- center

这里面有个老师最爱的写法：
```python
plt.legend(loc='best')
```
这个写法是由系统决定图例放在哪里。用了这个参数后，我们显示出图像，手动拖动图像放大缩小，你可以看到图例的位置会根据图像的具体情况而变化，原则是尽量不遮挡图像。想“偷懒”的同学，只要记住这个写法就足够了。让图例放在最合适的位置就够了。

## 多幅图像
有时候我们需要将不同的图像放在一张纸上做对比。这时候，我们在电脑上就需要在一个画布上绘制多个图像坐标。
我们尝试吧上面的图像分别绘制并且并列显示在一起。
```python
x = np.arange(-10, 10, 0.1)
y1 = 2 * x + 1 
y2 = x * x

plt.subplot(1, 2, 1) # 一行两列布局的图，且现在画的是左图
plt.plot(x,y1, color='r', linestyle='-', linewidth=1, label='2x+1')
plt.xlabel("x")
plt.ylabel("y1")

plt.subplot(1, 2, 2) # 一行两列布局的图，且现在画的是右图
plt.plot(x,y2, color='b', linestyle=':', linewidth=1, label='x*x')
plt.xlabel("x")
plt.ylabel("y2")

plt.show()
```
这里面给大家解释一下，sublplot的参数含义：
1，2，1代表：图表是1行2列的第1幅图；
其实更完整的写法是：plt.subplot(nrows=1, ncols=1, index=1)
那么，1，2，2代表：图表是1行2列的，当前子图是第二幅图。

那么大家猜猜，plt.subplot(2，2，3)这幅子图的位置在哪里？
试试看，自己的猜想对不对？

如果经过尝试，应该能够想明白了，subplot(2,2,3)指的是图像是2行2列，当前图像位于顺序3，也就是显示在左下角的图像。

还有一种有意思的情况，就是可不可以让图像成为“品”字形排列，就是有的图像分两列显示，有的图像可以独占一行？
大家看看multi-figure.py的代码和效果。这里给大家解释一下：

前面两幅图分别是：
```python
plt.subplot(2, 2, 1)
plt.subplot(2, 2, 2)
```
这是可以理解的，2行2列，分别排序在1，2，他们占据了第一行的左右两个位置。
第三幅图采用了这样的描述：
plt.subplot(2,1,2)
这个意思是在绘制第三幅图时，将整个画布当成了2行1列，也就是吧第一行的两幅图当成了一个整体，那么，2，1，2就成了2行1列中的第二幅，所以也就是下半部分的一幅图。大家不妨想想，如果写成plt.subplot(2,1,1)会怎样？试试看。（会覆盖上面并列的两幅图）


## 作业
今天的内容主要是美化图像并设置布局。
上次作业所有同学都准确的绘制了这些函数的曲线：
- y = 2 * x + 1 
- y = 4 * x + 1
- y = x + 2
- y = x * x
- y = x * x + 1
- y = (x + 1) * (x + 1) 

这次我们要求将这6幅图绘制在一个画布中：
1. 分成两行，每行绘制三幅图，一共六幅小图，以3 * 2的布局显示在一个画布中；
2. 每张图上都要有网格；
3. 每张图都要有图例。



